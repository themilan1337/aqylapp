{include '../partials/header.latte'}

    <style>
        .option-button:hover:not(:disabled) {
            transform: scale(1.03);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        .option-button:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.4);
        }
         .option-button {
             transition: all 0.2s ease-in-out;
         }
        .chat-scroll::-webkit-scrollbar {
            width: 6px;
        }
        .chat-scroll::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        .chat-scroll::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        .chat-scroll::-webkit-scrollbar-thumb:hover {
            background: #94a3b8;
        }
    </style>

<div class="">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8">

        <div class="lg:col-span-2">
            <!-- Start Screen -->
            <div id="startScreen"
                class="hidden border border-gray-200 h-full rounded-3xl flex flex-col items-center justify-center p-6 md:p-10 bg-white">
                <h1 class="text-xl sm:text-xl md:text-3xl font-bold mb-8 md:mb-12 text-gray-800">Время квиза!</h1>
                <button id="start-quiz"
                        class="px-16 py-4 bg-green-500 text-white font-semibold rounded-full hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition duration-150 ease-in-out transform hover:scale-105 text-lg md:text-xl">
                        Начать!
                </button>
            </div>
            <div id="quizBox" class="border border-gray-200 h-full rounded-3xl flex flex-col items-center justify-center p-6 md:p-10 bg-white">
                <div id="quiz-inner-container" class="quiz-container max-w-3xl w-full">
                    <div class="question mb-8 md:mb-10">
                        <div id="messBox" class="hidden mt-6 text-center p-4 mb-8 md:mb-10 bg-green-100 border border-green-300 rounded-lg shadow-inner">
                            <p id="mess"class="text-lg font-semibold text-green-800 flex items-center justify-center gap-2"></p>
                        </div>
                        <p id="question-content" class="text-xl sm:text-2xl md:text-3xl font-semibold mb-8 md:mb-10 text-center text-gray-800 leading-relaxed">
                            Загружаю...
                        </p>
                        <div class="options grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-5">
                            <button class="answer-btn option-button w-full p-4 md:p-5 border-2 border-gray-300 rounded-xl text-gray-700 hover:border-blue-400 hover:text-blue-600 bg-white focus:border-blue-500 focus:text-blue-700 focus:bg-blue-50 flex items-center justify-center text-lg md:text-xl font-medium">
                                Загружаю...
                            </button>

                             <button class="answer-btn option-button w-full p-4 md:p-5 border-2 border-gray-300 rounded-xl text-gray-700 hover:border-blue-400 hover:text-blue-600 bg-white focus:border-blue-500 focus:text-blue-700 focus:bg-blue-50 flex items-center justify-center text-lg md:text-xl font-medium">
                                Загружаю...
                            </button>

                             <button class="answer-btn option-button w-full p-4 md:p-5 border-2 border-gray-300 rounded-xl text-gray-700 hover:border-blue-400 hover:text-blue-600 bg-white focus:border-blue-500 focus:text-blue-700 focus:bg-blue-50 flex items-center justify-center text-lg md:text-xl font-medium">
                                Загружаю...
                            </button>

                            <button class="answer-btn option-button w-full p-4 md:p-5 border-2 border-gray-300 rounded-xl text-gray-700 hover:border-blue-400 hover:text-blue-600 bg-white focus:border-blue-500 focus:text-blue-700 focus:bg-blue-50 flex items-center justify-center text-lg md:text-xl font-medium">
                                Загружаю...
                            </button>
                        </div>
                    </div>

                    <div class="flex justify-center mt-8 md:mt-10">
                        <button id="submit-answer" class="w-full sm:w-auto px-16 py-3 bg-green-500 text-white font-semibold rounded-full hover:from-green-600 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition duration-150 ease-in-out transform disabled:opacity-50 disabled:cursor-not-allowed">
                            Проверить ответ!
                         </button>
                        <button id="nextQuestion" class="hidden w-full sm:w-auto px-16 py-3 bg-green-500 text-white font-semibold rounded-full hover:from-green-600 hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-offset-2 transition duration-150 ease-in-out transform disabled:opacity-50 disabled:cursor-not-allowed">
                            Следущий вопрос
                         </button>
                    </div>
                </div>
            </div>
        </div>

         <div class="flex flex-col"> 
             <div class="border border-gray-200 bg-white rounded-2xl p-4 md:p-6 flex flex-col flex-grow h-full">
                <div class="flex-shrink-0"> 
                    <div class="space-y-4 mb-4">
                        <div class="flex items-center">
                            <h3 class="font-semibold text-base md:text-lg text-gray-800 my-auto">Обьяснение</h3>
                        </div>
                        <hr>
                    </div>
                </div>

                 <div class="space-y-5 flex-grow overflow-y-auto pr-2 chat-scroll min-h-[200px]"> 
                    <div class="ai-response flex gap-x-2 sm:gap-x-3">
                    <img src="/assets/img/ChatGpt.png" class="size-6 rounded-full flex-shrink-0 object-cover" alt="AI Avatar">
                         <div class="bg-gray-100 rounded-lg rounded-tl-none p-3 max-w-[85%]">
                            <p id="explanation" class="text-2xl text-gray-800">...</p>
                         </div>
                     </div>
                 </div>

                 <div class="hidden mt-4 relative flex-shrink-0">
                     <input id="promptInput" type="text" class="py-2.5 sm:py-3 px-4 pr-12 block w-full border border-gray-300 outline-none transition rounded-lg text-sm focus:border-green-500 focus:ring-green-500 disabled:opacity-50 disabled:pointer-events-none" placeholder="Спроси о чём угодно...">
                     <button id="submitPrompt" class="absolute right-2 top-1/2 transform -translate-y-1/2 p-1.5 rounded-md bg-green-500 hover:bg-green-600 transition-colors text-white flex items-center justify-center">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                              <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                         </svg>
                     </button>
                 </div>
             </div>
         </div>

    </div>

     <div class="mt-6 lg:mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6">
       <div class="flex flex-col items-center justify-center p-4 bg-gradient-to-br from-blue-50 to-indigo-100 rounded-xl border border-blue-200 shadow-sm">
         <div class="text-indigo-500 mb-2">
            <svg class="h-7 w-7" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M13.5 8a5.5 5.5 0 1 1-11 0a5.5 5.5 0 0 1 11 0M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0M8.75 4.5a.75.75 0 0 0-1.5 0V8a.75.75 0 0 0 .3.6l2 1.5a.75.75 0 1 0 .9-1.2l-1.7-1.275z" clip-rule="evenodd"/></svg>
         </div>
         <p class="text-xs sm:text-sm text-gray-500 font-medium uppercase tracking-wider">Время</p>
         <p class="text-xl sm:text-2xl font-bold text-gray-800" id="time">00:00:00</p>
       </div>

       <div class="flex flex-col items-center justify-center p-4 bg-gradient-to-br from-green-50 to-emerald-100 rounded-xl border border-green-200 shadow-sm">
         <div class="text-green-500 mb-2">
         <svg class="h-7 w-7" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="m9.194 5l.351.873l.94.064l3.197.217l-2.46 2.055l-.722.603l.23.914l.782 3.108l-2.714-1.704L8 10.629l-.798.5l-2.714 1.705l.782-3.108l.23-.914l-.723-.603l-2.46-2.055l3.198-.217l.94-.064l.35-.874L8 2.025zm-7.723-.292l3.943-.268L6.886.773C7.29-.231 8.71-.231 9.114.773l1.472 3.667l3.943.268c1.08.073 1.518 1.424.688 2.118L12.185 9.36l.964 3.832c.264 1.05-.886 1.884-1.802 1.31L8 12.4l-3.347 2.101c-.916.575-2.066-.26-1.802-1.309l.964-3.832L.783 6.826c-.83-.694-.391-2.045.688-2.118" clip-rule="evenodd"/></svg>
         </div>
         <p class="text-xs sm:text-sm text-gray-500 font-medium uppercase tracking-wider">Счет
         <p class="text-xl sm:text-2xl font-bold text-gray-800">
           <span id="score">0</span>
         </p>
       </div>

       <div class="flex flex-col items-center justify-center p-4 bg-gradient-to-br from-purple-50 to-pink-100 rounded-xl border border-purple-200 shadow-sm">
         <div class="text-purple-500 mb-2">
            <svg class="h-7 w-7" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 16 16"><path fill="currentColor" fill-rule="evenodd" d="M8 13.5a5.5 5.5 0 1 0 0-11a5.5 5.5 0 0 0 0 11M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14M6.44 4.54c.43-.354.994-.565 1.56-.565c1.217 0 2.34.82 2.34 2.14c0 .377-.078.745-.298 1.1c-.208.339-.513.614-.875.867c-.217.153-.325.257-.379.328c-.038.052-.038.07-.038.089a.75.75 0 0 1-1.5 0c0-.794.544-1.286 1.057-1.645c.28-.196.4-.332.458-.426a.54.54 0 0 0 .075-.312c0-.3-.244-.641-.84-.641a1 1 0 0 0-.608.223c-.167.138-.231.287-.231.418a.75.75 0 0 1-1.5 0c0-.674.345-1.22.78-1.577M8 12a1 1 0 1 0 0-2a1 1 0 0 0 0 2" clip-rule="evenodd"/></svg>
         </div>
         <p class="text-xs sm:text-sm text-gray-500 font-medium uppercase tracking-wider">Вопросы</p>
         <p class="text-xl sm:text-2xl font-bold text-gray-800">
           <span id="questions-answered">0</span>
         </p>
       </div>
     </div>
</div>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
<script src="https://cdn.jsdelivr.net/npm/preline@2.6.0/dist/preline.min.js"></script>
<link rel="stylesheet" type="text/css" href="/css/quiz.css">
<script type="module" src="/scripts/quizEventController.js"></script>
<script type="module" src="/scripts/quizAIhelper.js"></script>
{include '../partials/footer.latte'}